{"remainingRequest":"/Users/lauchach/CPE492web/node_modules/babel-loader/lib/index.js!/Users/lauchach/CPE492web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/lauchach/CPE492web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lauchach/CPE492web/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lauchach/CPE492web/src/components/Login.vue","mtime":1637491403009},{"path":"/Users/lauchach/CPE492web/babel.config.js","mtime":1637491403004},{"path":"/Users/lauchach/CPE492web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lauchach/CPE492web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lauchach/CPE492web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lauchach/CPE492web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBmYiB9IGZyb20gJy4uL2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgcHJvcHM6IHsKICAgIG1zZzogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF9kYXRhID0ge307CiAgICAgIGZiLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLmVtYWlsLCB0aGlzLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChlbWFpbCkgewogICAgICAgIHZhciBkYiA9IGZiLmZpcmVzdG9yZSgpOwogICAgICAgIGRiLmNvbGxlY3Rpb24oJ01FTUJFUl9UQUJMRScpLndoZXJlKCdzdHVkZW50X21haWwnLCAnPT0nLCBfdGhpcy5lbWFpbCkuZ2V0KCkudGhlbihmdW5jdGlvbiAodXNlclNob3cpIHsKICAgICAgICAgIHVzZXJTaG93LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhkb2MuaWQsICc9PicsIGRvYy5kYXRhKCkpOwogICAgICAgICAgICBfZGF0YSA9IGRvYy5kYXRhKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyRGF0YScsIEpTT04uc3RyaW5naWZ5KF9kYXRhKSk7CiAgICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSk7CiAgICAgICAgICBjb25zb2xlLmxvZygnYXV0aCBwYXNzIHJlcycsIHJlcyk7CgogICAgICAgICAgaWYgKHJlcy50eXBlKSB7CiAgICAgICAgICAgIGlmIChyZXMudHlwZSA9PT0gJ2FkbWluJykgewogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSgnYWRtaW4nKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMudHlwZSA9PT0gJ3VzZXInIHx8IHJlcy50eXBlID09PSAnc3R1ZGVudCcpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnODU+PicpOwoKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnJlcGxhY2UoJ1Byb2ZpbGV2aWV3cycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgn4Lih4Li14Lia4Liy4LiH4Lit4Lii4LmI4Liy4LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUIOC4geC4o+C4uOC4k+C4suC4peC4reC4h+C5g+C4q+C4oeC5iOC4reC4teC4geC4hOC4o+C4seC5ieC4hycpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuCiAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7CiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CgogICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdhdXRoL3dyb25nLXBhc3N3b3JkJykgewogICAgICAgICAgYWxlcnQoJ1dyb25nIHBhc3N3b3JkLicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChlcnJvck1lc3NhZ2UpOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZmIuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLmVtYWlsLCB0aGlzLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChlbWFpbCkgewogICAgICAgIHZhciBkYiA9IGZiLmZpcmVzdG9yZSgpOwogICAgICAgIGRiLmNvbGxlY3Rpb24oJ01FTUJFUl9UQUJMRScpLmRvYyhfdGhpczIuZW1haWwpLnNldCh7CiAgICAgICAgICBzdHVkZW50X21haWw6IF90aGlzMi5lbWFpbCwKICAgICAgICAgIHR5cGU6ICd1c2VyJywKICAgICAgICAgIHN0YXR1czogMAogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCfguJfguLNhZGQgZGInKTsKICAgICAgICBhbGVydCgn4Liq4Liz4LmA4Lij4LmH4LiIJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIEhhbmRsZSBFcnJvcnMgaGVyZS4KICAgICAgICB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTsKICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsKCiAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ2F1dGgvd2Vhay1wYXNzd29yZCcpIHsKICAgICAgICAgIGFsZXJ0KCdUaGUgcGFzc3dvcmQgaXMgdG9vIHdlYWsuJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KGVycm9yTWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"login\">\n        <!-- Modal -->\n        <div class=\"modal fade\" id=\"login\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"loginTitle\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered\"  role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-body\">\n                        <ul class=\"nav nav-fill nav-pills mb-5\" id=\"pills-tab\" role=\"tablist\">\n                            <li class=\"nav-item\">\n                                <a class=\"nav-link active\" id=\"pills-home-tab\" data-toggle=\"pill\" href=\"#pills-login\" role=\"tab\" aria-controls=\"pills-login\" aria-selected=\"true\">Login</a>\n                            </li>\n                            <li class=\"nav-item\">\n                                <a class=\"nav-link\" id=\"pills-register-tab\" data-toggle=\"pill\" href=\"#pills-register\" role=\"tab\" aria-controls=\"pills-register\" aria-selected=\"false\">Signup</a>\n                            </li>\n                        </ul>\n                        <div class=\"tab-content\" id=\"pills-tabContent\">\n                        <div class=\"tab-pane fade show active\" id=\"pills-login\" role=\"tabpanel\" aria-labelledby=\"pills-login-tab\">\n                            <h5 class=\"text-center\">Login Please</h5>\n                            <div class=\"form-group\">\n                                <label for=\"exampleInputEmail1\">Email address</label>\n                                <input type=\"email\" v-model=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\">\n                                <small class=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n                            </div>\n                            <div class=\"form-group\">\n                                <label for=\"exampleInputPassword1\">Password</label>\n                                <input type=\"password\" @keyup.enter=\"login\" v-model=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\">\n                            </div>\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary\" data-dismiss=\"modal\" @click=\"login\">Login</button>\n                            </div>\n                        </div>\n                        <div class=\"tab-pane fade\" id=\"pills-register\" role=\"tabpanel\" aria-labelledby=\"pills-register-tab\">\n                             <h5 class=\"text-center\">Create New Account</h5>\n                            <div class=\"form-group\">\n                                <label for=\"email\">Email address</label>\n                                <input type=\"email\"  v-model=\"email\" class=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\">\n                            </div>\n                            <div class=\"form-group\">\n                                <label for=\"password\">Password</label>\n                                <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"password\" placeholder=\"Password\">\n                            </div>\n                            <div class=\"form-group\">\n                                <button class=\"btn btn-primary\" data-dismiss=\"modal\"  @click=\"register\">Signup</button>\n                            </div>\n                        </div>\n                        </div>\n                </div>\n            </div>\n        </div>\n        </div>\n  </div>\n</template>\n<script>\nimport { fb } from '../firebase'\nexport default {\n  name: 'Login',\n  props: {\n    msg: String\n  },\n  data () {\n    return {\n      name: '',\n      email: '',\n      password: ''\n    }\n  },\n  methods: {\n    login () {\n      let _data = {}\n      fb.auth().signInWithEmailAndPassword(this.email, this.password)\n        .then((email) => {\n          const db = fb.firestore()\n          db.collection('MEMBER_TABLE').where('student_mail', '==', this.email).get().then(userShow => {\n            userShow.forEach(doc => {\n              console.log(doc.id, '=>', doc.data())\n              _data = doc.data()\n            })\n            localStorage.setItem('userData', JSON.stringify(_data))\n            let res = JSON.parse(localStorage.getItem('userData'))\n            console.log('auth pass res', res)\n            if (res.type) {\n              if (res.type === 'admin') {\n                this.$router.replace('admin')\n              } else if (res.type === 'user' || res.type === 'student') {\n                console.log('85>>')\n                this.$router.replace('Profileviews')\n              }\n            } else {\n              alert('มีบางอย่างผิดพลาด กรุณาลองใหม่อีกครั้ง')\n            }\n          })\n        })\n        .catch(function (error) {\n          // Handle Errors here.\n          var errorCode = error.code\n          var errorMessage = error.message\n          if (errorCode === 'auth/wrong-password') {\n            alert('Wrong password.')\n          } else {\n            alert(errorMessage)\n          }\n          console.log(error)\n        })\n    },\n    register () {\n      fb.auth().createUserWithEmailAndPassword(this.email, this.password)\n        .then((email) => {\n          const db = fb.firestore()\n          db.collection('MEMBER_TABLE').doc(this.email).set({\n            student_mail: this.email,\n            type: 'user',\n            status: 0\n          })\n          console.log('ทำadd db')\n          alert('สำเร็จ')\n        })\n        .catch(function (error) {\n        // Handle Errors here.\n          var errorCode = error.code\n          var errorMessage = error.message\n          if (errorCode === 'auth/weak-password') {\n            alert('The password is too weak.')\n          } else {\n            alert(errorMessage)\n          }\n          console.log(error)\n        })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}